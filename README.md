# Mini GeoGuessr-like

ブラウザで遊べるミニ GeoGuessr 風ゲームです。Wikimedia Commons から取得した 360° パノラマ写真をもとに、表示された場所がどこかを世界地図上で推測してスコアを競います。PC やスマートフォンなど様々なデバイスで快適に遊べるよう UI を調整しています。

## 機能

- 10 件の候補リストを作成し、その中から 3 ラウンド分をランダムに出題
- Pannellum を使った 360° パノラマビューア（ドラッグで視点移動、ホイール/ピンチでズーム）
- Leaflet ベースの推測用マップでタップ/クリックして位置を指定
- 推測地点と正解地点の距離に応じたスコア計算（最大 5000pt）
- 正解位置・距離・得点を表示する結果オーバーレイと軌跡ライン
- Wikimedia Commons API が使えない場合のフォールバック候補
- 960px 未満では縦並びになるレスポンシブ UI、640px 未満ではタッチ操作向けのレイアウト

## 使い方

1. `docs/index.html` をブラウザで開くか、簡易 HTTP サーバーを立ち上げます。
   ```bash
   # 例: Python の簡易サーバーを使う場合
   cd docs
   python -m http.server 8000
   ```
   その後 `http://localhost:8000/` にアクセスします。
2. 「ゲーム開始」を押すと候補の取得が始まり、ラウンド 1 がスタートします。
3. パノラマを見ながら地図をクリック/タップして推測した位置をマークし、「この場所にする！」で回答します。
4. 結果パネルで距離と得点を確認し、「次のラウンド ▶」で進行します。3 ラウンド終えると合計スコアが表示されます。
5. いつでも「リスタート」でゲームをリセットできます。

## 開発メモ

- 主要ファイル
  - `docs/index.html`: 画面構造と外部リソースの読み込み
  - `docs/style.css`: レイアウトやテーマカラーを定義したスタイルシート
  - `docs/app.js`: ゲームロジックと Wikimedia Commons API 連携
- Leaflet と Pannellum は CDN から読み込んでいます。オフライン対応が必要な場合はローカルにホストするか、バンドルしてください。
- Wikimedia Commons API へアクセスするため、ブラウザで開く際は `file://` ではなく HTTP 経由にすることを推奨します（CORS 制限を回避）。
- 追加の候補やルールを増やす場合は `FALLBACK_LOCATIONS` やスコア算出ロジック（`scoreFromDistance`）を調整してください。

## ライセンス

ソースコード部分は本リポジトリ作者のライセンスに従います。ゲーム内で利用するパノラマ画像は Wikimedia Commons の提供元ライセンスに従ってください。
